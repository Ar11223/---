<view class="container"><form data-event-opts="{{[['submit',[['handleSubmit',['$event']]]]]}}" bindsubmit="__e"><view class="form-card"><view class="form-header"><text class="form-title">创建抽签活动</text></view><view class="form-body"><view class="form-section"><text class="section-title">基本信息</text><view class="{{['form-item',(errors.title)?'error':'']}}"><text class="form-label">活动标题</text><input class="form-input" placeholder="请输入活动标题" data-event-opts="{{[['input',[['__set_model',['$0','title','$event',[]],['formData']]]]]}}" value="{{formData.title}}" bindinput="__e"/><block wx:if="{{errors.title}}"><text class="error-msg">{{errors.title}}</text></block></view><view class="{{['form-item',(errors.location)?'error':'']}}"><text class="form-label">活动地点</text><input class="form-input" placeholder="请输入活动地点" data-event-opts="{{[['input',[['__set_model',['$0','location','$event',[]],['formData']]]]]}}" value="{{formData.location}}" bindinput="__e"/><block wx:if="{{errors.location}}"><text class="error-msg">{{errors.location}}</text></block></view><view class="form-item"><text class="form-label">活动说明</text><textarea class="form-textarea" placeholder="请输入活动说明" data-event-opts="{{[['input',[['__set_model',['$0','description','$event',[]],['formData']]]]]}}" value="{{formData.description}}" bindinput="__e"></textarea></view><view class="{{['form-item',(errors.maxParticipants)?'error':'']}}"><text class="form-label">最大参与人数</text><input class="form-input" type="number" placeholder="请输入最大参与人数" data-event-opts="{{[['input',[['__set_model',['$0','maxParticipants','$event',[]],['formData']]]]]}}" value="{{formData.maxParticipants}}" bindinput="__e"/><block wx:if="{{errors.maxParticipants}}"><text class="error-msg">{{errors.maxParticipants}}</text></block></view></view><view class="form-section"><text class="section-title">抽签设置</text><view class="{{['form-item',(errors.options)?'error':'']}}"><text class="form-label">抽签选项</text><view class="options-list"><block wx:for="{{formData.options}}" wx:for-item="option" wx:for-index="index" wx:key="index"><view class="option-item"><input class="form-input" placeholder="请输入选项" data-event-opts="{{[['input',[['__set_model',['$0',index,'$event',[]],['formData.options']]]]]}}" value="{{formData.options[index]}}" bindinput="__e"/><text data-event-opts="{{[['tap',[['deleteOption',[index]]]]]}}" class="delete-btn" bindtap="__e">删除</text></view></block></view><button data-event-opts="{{[['tap',[['addOption',['$event']]]]]}}" class="add-btn" bindtap="__e">添加选项</button><block wx:if="{{errors.options}}"><text class="error-msg">{{errors.options}}</text></block></view><view class="{{['form-item',(errors.time)?'error':'']}}"><text class="form-label">抽签时间范围</text><view class="time-range"><picker mode="date" value="{{formData.lotteryStartDate}}" data-event-opts="{{[['change',[['onLotteryStartDateChange',['$event']]]]]}}" bindchange="__e"><view class="form-input">{{formData.lotteryStartDate||'开始日期'}}</view></picker><picker mode="time" value="{{formData.lotteryStartTime}}" data-event-opts="{{[['change',[['onLotteryStartTimeChange',['$event']]]]]}}" bindchange="__e"><view class="form-input">{{formData.lotteryStartTime||'开始时间'}}</view></picker><text class="separator">至</text><picker mode="date" value="{{formData.lotteryEndDate}}" data-event-opts="{{[['change',[['onLotteryEndDateChange',['$event']]]]]}}" bindchange="__e"><view class="form-input">{{formData.lotteryEndDate||'结束日期'}}</view></picker><picker mode="time" value="{{formData.lotteryEndTime}}" data-event-opts="{{[['change',[['onLotteryEndTimeChange',['$event']]]]]}}" bindchange="__e"><view class="form-input">{{formData.lotteryEndTime||'结束时间'}}</view></picker></view><block wx:if="{{errors.time}}"><text class="error-msg">{{errors.time}}</text></block></view></view><view class="form-section"><text class="section-title">其他设置</text><view class="form-item"><text class="form-label">验证设置</text><view class="switch-container"><switch checked="{{formData.useCode}}" data-event-opts="{{[['change',[['onUseCodeChange',['$event']]]]]}}" bindchange="__e"></switch><text class="switch-label">使用验证码</text></view></view><block wx:if="{{formData.useCode}}"><view class="{{['form-item',(errors.code)?'error':'']}}"><text class="form-label">验证码</text><input class="form-input" placeholder="请输入验证码" data-event-opts="{{[['input',[['__set_model',['$0','code','$event',[]],['formData']]]]]}}" value="{{formData.code}}" bindinput="__e"/><block wx:if="{{errors.code}}"><text class="error-msg">{{errors.code}}</text></block></view></block><view class="form-item"><text class="form-label">允许名单</text><view class="upload-section"><button data-event-opts="{{[['tap',[['uploadAllowList',['$event']]]]]}}" class="upload-btn" bindtap="__e">上传名单文件</button><text class="upload-tip">支持txt、csv格式，每行一个名字</text></view><textarea class="form-textarea" placeholder="或直接输入允许参与的人员名单，每行一个名字" data-event-opts="{{[['input',[['__set_model',['','allowListText','$event',[]]]]]]}}" value="{{allowListText}}" bindinput="__e"></textarea></view></view></view><view class="form-footer"><button class="submit-btn" form-type="submit" disabled="{{isSubmitting}}"><block wx:if="{{!isSubmitting}}"><text>创建活动</text></block><block wx:else><text>提交中...</text></block></button></view></view></form></view>